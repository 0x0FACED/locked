# Locked

Это учебный проект для изучения написания полноценных приложений на языке Golang, изучения различных форматов файлов и изучения криптографии. 

Интерфейсы:

1. CLI
2. Web (local)
3. Возможно, даже desktop UI с помощью Fyne.

## Что из себя представляет проект?

Это хранилище секретов. Хранение будет в файлах собственного формата. Данные будут зашифрованы и сжаты, что сделает невозможным прочтение содержимого файлов без ключа.

2 основных пакета:
1. `cmd/locked`
2. `internal/core`

`cmd/locked` будет располагать в себе `main`, где мы будем запускать просто приложуху.

## Примерная схема файла:

1. Header - часть файла с метаданными, такими как версия, соль от пароля, контрольная сумма, количеством секретов и тд
2. Основная часть - сами секреты.

Чтобы по секретам можно было быстро переходить, у каждого секрета будет Offset, который будет указывать на следующий секрет.

## Проблемы

- Основная проблема: удаление секретов из начала/середины файла.
- Еще одна проблема: конфиденциальность. Да, это будет проблемой, так как мы не можем руками очистить определенный участок памяти, а GC не гарантирует, что очистка кучи произойдет сразу после взаимодействия с ней. Поэтому, скорее всего, переменные будут локальными и не указателями. К тому же нельзя будет держать файл открытым длительное время. Надо сделать так, чтобы каждый запрос мы открывали файл, выполняли какие-то действия и после сразу закрывали.

Предполагается использование **memguard**.

## Что можно хранить?

Все. Буквально все. Любой файл до определенного размера или просто текст - все можно будет хранить в таком хранилище.

## Структура секрета

Каждый секрет надо представить в виде какой-то структуры. Как это сделать?

Ну, 100% секрет должен иметь payload/полезную нагрузку/сами данные. Еще нужен `offset`, так как планируется сделать обход секретов именно через оффсеты. Это позволит как быстро искать все секреты через горутины/каналы, так и в целом распознавать программе, с какого момента начинается именно секрет.

Так, окей, а что еще? Еще нужно какое-то название, верно? Верно. Причем название должно быть ФИКСИРОВАННОЙ ДЛИНЫ, как и все поля, кроме данных =)

Еще в идеале выделить часть на описание формата файла, правильно? Да, надо бы, чтобы понимать, как в целом экспортировать секрет.

Можно добавить дату добавления секрета для красивого вывода и доп инфы. 

Еще надо добавить какое-то описание, чтобы можно было понять, че за секрет вообще.

Еще можно какой-нибудь ID типа int добавить.

Окей, вот что получаем:
1. **Offset** *(8 bytes)*
2. **ID** *(2-4 bytes)*
3. **Name** *(32-64 bytes)*
4. **Type** *(1 byte - будем хранить как число от 0 до 255)*
5. **Date** *(8 byte Unix)*
6. **Description** *(64-128 bytes)*
7. **Payload size** *(8 bytes для огромных секретов/файлов)*
8. **Payload** *(n bytes)*
